<style>
#feed {
    margin: auto;
    margin-top: 1rem;
    border: 3px solid black;
    a:hover { color: var(--accent-color) }
    ul { padding-left: 0.5rem; }
}

#feed-first {
    flex: 40%;
    position: relative;
    display: block;
    min-height: 150px;
    background-image: var(--thumb);
    background-size: cover;
    background-position: 50%;
    overflow: hidden;

    span > span { display: none; }
    > div { 
        opacity: 0; 
        transition: 0.2s;
        z-index: 2;
        text-align: center;
        position: absolute;
        top: 80%;
        left: 50%;
        transform: translateX(-50%) translateY(-50%);
        > span { color: white; }
    }

    &::after {
        content: "";
        display: block;
        z-index: 1;
        background: black;
        opacity: 0;
        width: 100%;
        height: 100%;
        position: absolute;
        transition: 0.2s;
    }

    &:hover {
        &::after { opacity: 0.9; }
        > div { opacity: 1; top: 50%; }
    }
}

#feed-timeline {
    flex: 60%;
    padding: 1.5rem;
    > h2 { color:var(--yellow) }
    > ul { margin-bottom: 0.5rem; }
    cursor: pointer;
}

.feed-item {
    overflow: hidden;
    white-space: nowrap;
    text-overflow: ellipsis;
    
    h4 { display: inline-block; }
    h4::after { content: " » "}
    a { color: var(--gray); }
}

.feed-more {
    color: var(--);
    font-size: bolder;
    font-family: var(--display-font);
}

.feed-title > span {display: none;}

@media only screen and (min-width: 600px) {
    #feed-content { display: flex; }
}
</style>
<section id="feed">
    <div id="feed-content"></div>
    <script>
        fetch("/feed.xml")
        .then((response) => response.text())
        .then((feed) => {
            const parser = new DOMParser();
            feed = parser.parseFromString(feed, "text/xml");
            final = ""

            feedItems = feed.querySelectorAll("item")
            
            // First Feed Item
            title = getTitle(feedItems[0])
            date = convDate(feedItems[0])
            thumb  = feedItems[0].querySelector("description img").getAttribute("src")
            link  = feedItems[0].querySelector("link").innerHTML
            
            result =   `
                <a id="feed-first" href="${link}" style="--thumb:url(${thumb});">
                    <div class="outline" style="--color: black;">
                        <h4>${date}</h4>
                        <span>${title}</span>
                    </div>
                </a>
            `

            final += result + `
                <section id="feed-timeline">
                    <h2>Recent Updates</h2>
                    <ul>
            `
            
            // 4 Feed Items
            for (i = 1; i < 5 ;i++){
                title = getTitle(feedItems[i])
                date = convDate(feedItems[i])
                link  = feedItems[i].querySelector("link").innerHTML

                
                result =   `
                    <li class="feed-item">
                        <h4>${date}</h4>
                        <a href="${link}" class="feed-title">${title}</a>
                    </li>
                `

                final += result
            }
            final += `</ul></div>`
            final += `<a class="feed-more" href="./meta/log/index.html#feed">View More »</a>`
            document.getElementById("feed-content").innerHTML = final
        })

        function getTitle (e){
            e = e.querySelector("title").innerHTML
            result = e.replace("[","<span>#")
            result = result.replace("]","</span>")
            return result
        }

        function convDate(e){
            e = e.querySelector("pubDate").innerHTML
            result = e.slice(4, e.length - 13)
            return result
        }
    </script>
</section>  