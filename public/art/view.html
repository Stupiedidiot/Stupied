<!--------------------------
─── ･ ｡ﾟ☆: *.☽ .* :☆ﾟ. ───

Last Posted on 2025/06/26

─── ･ ｡ﾟ☆: *.☽ .* :☆ﾟ. ───
--------------------------->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="./main.css">
  <meta name="description" content="Art by Stupied :]">
  <title></title>
<style>
#aside-1-content a {
  display: inline-block;
  position: relative;
  transition: 0.2s;

  &:hover { color: white; }

  &::before{
    z-index: -1;
    content: "";
    display: block;
    position: absolute;
    bottom: 0;
    background-color: var(--blue);
    width: 100%;
    height: 15%;
    transition: 0.2s;
  }

  &:hover::before{
    height: 100%;
  }
}

#container .main-content, #container #aside-1{
    border:3px solid black;
}

#image img{ display: block; background-color: black; }
#title span { color:rgb(185, 185, 185); font-size: 0.9rem; }

#nextprev{
  color: var(--wheat);
  background-color:black;
  text-align:center;
  padding:1rem 0;
}
#nextprev a:hover{ color:var(--blue); }

footer{ color:var(--wheat); }

</style>
</head>
<body style="background-color:var(--dark-brown);background-image: none;">

<div class="main-content" style="padding:0;">
  <div id="image"></div>
  <div id="nextprev"></div>
  <div id="c_widget" style="padding:1rem;"></div>
</div>

<div id="aside-1-content">
  <h3 id="title"></h3>
  <div id="desc"></div>
</div>

<script src="./main.js"></script>
<script>
const urlQuery = new URLSearchParams(window.location.search)
currentImage = urlQuery.get('item')

fetch("./main.json")
    .then((response) => response.json())
    .then((art) => {
      if(currentImage === null){
        currentImage = art[0].img
        window.location.replace("./view.html?item=" + currentImage);
      }

      imageLink='./img/'+currentImage
      image='<a href="'+imageLink+'"><img src="'+imageLink+'" title="open image"></a>'
      document.getElementById("image").innerHTML = image

      currentIndex=getIndex(art,currentImage)
      if (currentIndex>-1){
        title = getTitle(art,currentIndex)
        
        year = getDate(art,currentIndex)
        year = "<span> (" + year + ")</span>"

        document.getElementById("title").innerHTML = title + year
        document.title = title +" // stupied"

        if(art[currentIndex].desc!==undefined){
          document.getElementById("desc").innerHTML = art[currentIndex].desc
        }
        
        if(art[currentIndex].extra!==undefined){
          extraHTML = ""
          for(i = 0; i < art[currentIndex].extra.length; i++){
            selected = "./img/" + art[currentIndex].extra[i]
            extraHTML += '<a href="' + selected + '"><img src="'+ selected +'" alt=""></a>'
          }
          document.getElementById("image").innerHTML += extraHTML
        }
      } else {
        document.getElementById("title").innerHTML = "What in the What"
        document.title = "Error // stupied"  
        document.getElementById("desc").innerHTML = "This image is either unlisted or does not exist at all :/"
      }
      nextprev=genNav(art)
      document.getElementById("nextprev").innerHTML=nextprev
})

function getDate(art,x) {
  selected = art[x].img
  index = selected.indexOf("2")
  result = selected.slice(index, index + 4)
  return result
}

function genNav(e){
  result=""
  if(e[currentIndex-1]){
    nextI= "./view.html?item=" + e[currentIndex-1].img;
    result+="<a href='./" + nextI + "' id='nextprev-next'>« Next</a> | "
  }

  result+="<a href='./index.html' id='nextprev-home'>Home</a>"

  if(e[currentIndex+1]){
    prevI= "./view.html?item=" + e[currentIndex+1].img;
    result+=" | <a href='./" + prevI + "' id='nextprev-prev'>Prev  »</a>"
  }

  return result
}

document.onkeydown = function(event) {
  if( document.activeElement === document.querySelector("body") ){
    switch (event.keyCode) {
        case 37:
            document.getElementById("nextprev-next").click()
        break;
        case 39:
            document.getElementById("nextprev-prev").click()
        break;
        case 27:
          document.getElementById("nextprev-home").click()
        break;
        }
  }
}
</script>
</body>
</html>